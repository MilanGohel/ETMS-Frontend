<p-dialog [(visible)]="visible" [modal]="true" [style]="{ width: '30rem'}" [contentStyle]="{'overflow': 'visible'}"
  (onHide)="closeDialog()">
  <ng-template #header>
    <div class="text-xl font-bold text-gray-900 dark:text-white">{{ project ? 'Edit Project' : 'Add New Project' }}
    </div>
  </ng-template>

  <form class="space-y-5" draggable="false" [formGroup]="form" (ngSubmit)="submitForm()">
    <!-- Name -->
    <div>
      <label class="block mb-1 text-sm text-gray-700 dark:text-gray-200">Project Name</label>
      <input pInputText formControlName="name"
        class="w-full px-4 py-2 rounded-lg placeholder-gray-500 dark:placeholder-gray-400 border border-gray-300 dark:border-gray-700 bg-white dark:bg-primary text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-secondary"
        placeholder="Enter project name" />
      @if (form.touched && form.get('name')?.errors?.['required']) {
      <div class="mt-1 text-sm text-red-600 dark:text-red-400">
        Project Name is Required.
      </div>
      }
    </div>

    <!-- Description -->
    <div>
      <label class="block mb-1 text-sm text-gray-700 dark:text-gray-200">Description</label>
      <textarea pInputTextarea formControlName="description"
        class="w-full px-4 py-2 rounded-lg placeholder-gray-500 dark:placeholder-gray-400 border border-gray-300 dark:border-gray-700 bg-white dark:bg-primary text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-secondary"
        placeholder="Enter description"></textarea>
    </div>

    <!-- Start Date -->
    <div>
      <label class="block mb-1 text-sm text-gray-700 dark:text-gray-200">Start Date</label>
      <p-datepicker formControlName="startDate" dateFormat="dd.mm.yy"
        inputClass="w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-700 bg-white dark:bg-primary text-gray-900 dark:text-gray-100"
        showIcon="true"></p-datepicker>
      @if (form.touched && form.get('startDate')?.errors?.['required']) {
      <div class="mt-1 text-sm text-red-600 dark:text-red-400">
        Start Date is Required.
      </div>
      }
    </div>

    <!-- End Date -->
    <div>
      <label class="block mb-1 text-sm text-gray-700 dark:text-gray-200">End Date</label>
      <p-datepicker formControlName="endDate" dateFormat="dd.mm.yy"
        inputClass="w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-700 bg-white dark:bg-primary text-gray-900 dark:text-gray-100"
        showIcon="true"></p-datepicker>
      @if (form.touched && form.get('endDate')?.errors?.['required']) {
      <div class="mt-1 text-sm text-red-600 dark:text-red-400">
        End Date is Required.
      </div>
      }
    </div>

    @if (
    form.touched &&
    form.hasError('dateRangeInvalid')
    ) {
    <div class="mt-1 text-sm text-red-600 dark:text-red-400">
      Start Date must be less than End Date.
    </div>
    }
    @if(!isEditing())
    {
    <div class="flex items-center gap-2">
      <p-checkbox formControlName="isAddDefaultBoards" binary="true" inputId="isAddDefaultBoards" />
      <label for="isAddDefaultBoards"> Default Boards? </label>
    </div>
    }
  </form>

  <ng-template #footer>
    <button (click)="closeDialog()"
      class="flex items-center gap-2 bg-gray-700 text-white cursor-pointer px-4 py-2 rounded-md hover:bg-gray-600 transition-colors text-sm">
      Cancel
    </button>

    <button (click)="submitForm()" type="submit"
      class="flex items-center gap-2 bg-secondary text-white px-4 py-2 rounded-md cursor-pointer hover:opacity-90 transition-opacity text-sm font-semibold">
      Save
    </button>
  </ng-template>
</p-dialog>