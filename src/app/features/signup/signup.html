<!-- signup.component.html -->

<div class="min-h-screen flex items-center justify-center bg-gray-50 dark:bg-black">
  <div class="w-full max-w-md mx-auto rounded-2xl shadow-lg p-8" style="background-color: var(--color-primary-light);">
    <div class="flex flex-row gap-2 justify-center items-center">
      <div class="flex items-center justify-center gap-3 mb-6">
        <img ngSrc="taskk-logo.png" alt="Logo" class="h-8 w-8" height="30" width="30">
        <h2 class="text-2xl font-semibold text-gray-900 dark:text-gray-100">Create your account</h2>
      </div>

    </div>

    <form class="space-y-5" [formGroup]="signUpForm" (ngSubmit)="onSignUp()">
      <div class="flex flex-row gap-2">
        <div>
          <label class="block mb-1 text-sm text-gray-700 dark:text-gray-200" for="name">First Name</label>
          <input formControlName="firstName" id="name" type="text" required
            class="w-full px-4 py-2 rounded-lg border border-gray-300 placeholder-gray-500 dark:placeholder-gray-400 dark:border-gray-700 bg-white dark:bg-[#131517] text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-secondary"
            placeholder="First name" />
          @if(firstName?.touched && firstName?.hasError('required'))
          {
          <span class="dark:text-red-700 text-red-500">Firstname Required.</span>
          }
        </div>
        <div>
          <label class="block mb-1 text-sm text-gray-700 dark:text-gray-200" for="name">Last Name</label>
          <input id="name" type="text" required formControlName="lastName"
            class="w-full px-4 py-2 rounded-lg border border-gray-300 placeholder-gray-500 dark:placeholder-gray-400 dark:border-gray-700 bg-white dark:bg-[#131517] text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-secondary"
            placeholder="Last name" />
          @if(lastName?.touched && lastName?.hasError('required'))
          {
          <span class="dark:text-red-700 text-red-500">Firstname Required.</span>
          }
        </div>
      </div>
      <div>
        <label class="block mb-1 text-sm text-gray-700 dark:text-gray-200" for="name">User Name</label>
        <input id="name" type="text" required formControlName="userName"
          class="w-full px-4 py-2 rounded-lg border border-gray-300 placeholder-gray-500 dark:placeholder-gray-400 dark:border-gray-700 bg-white dark:bg-[#131517] text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-secondary"
          placeholder="User name" />
        @if(userName?.touched && userName?.hasError('required'))
        {
        <span class="dark:text-red-700 text-red-500">Username is Required.</span>
        }
        @else if(userName?.touched && userName?.hasError("invalidUserName"))
        {
          <span class="dark:text-red-700 text-red-500">Username must be 3â€“15 characters long and contain only letters,
          numbers, dots (.), underscores (_) or hyphens (-)</span>
        }
        @if(userName?.touched && userName?.hasError("userNameTaken"))
        {
            <span class="dark:text-red-700 text-red-500">Username is already taken.</span>
        }
      </div>
      <div>
        <label class="block mb-1 text-sm text-gray-700 dark:text-gray-200" for="email">Email</label>
        <input id="email" type="email" required formControlName="email"
          class="w-full px-4 py-2 rounded-lg border placeholder-gray-500 dark:placeholder-gray-400 border-gray-300 dark:border-gray-700 bg-white dark:bg-[#131517] text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-secondary"
          placeholder="you@example.com" />
        @if(email?.touched && email?.hasError('required'))
        {
        <span class="dark:text-red-700 text-red-500">Email is Required.</span>
        }
        @else if(email?.touched && email?.hasError("invalidEmail")){

        <span class="dark:text-red-700 text-red-500">Invalid Email.</span>
        }
      </div>
      <div>
        <label class="block mb-1 text-sm text-gray-700 dark:text-gray-200" for="password">Password</label>
        <input id="password" type="password" required formControlName="password"
          class="w-full px-4 py-2 rounded-lg border placeholder-gray-400 border-gray-300 dark:border-gray-700 bg-white dark:bg-[#131517] text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-secondary"
          placeholder="Create a password" minlength="6" />
        @if(password?.touched && password?.hasError('required'))
        {
        <span class="dark:text-red-700 text-red-500">Password is Required.</span>
        }
        @else if(password?.touched && password?.hasError("minlength")){

        <span class="dark:text-red-700 text-red-500">Password Must be atleast 6 character long.</span>
        }
      </div>
      <button type="submit"
        class="w-full  py-2 rounded-lg text-white font-medium bg-[var(--color-secondary)] hover:bg-blue-600 transition">
        @if(isLoading){
        <span class="flex items-center justify-center">
          <svg class="animate-spin h-5 w-5 mr-2" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
            <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
            <path class="opacity-75" fill="currentColor"
              d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z">
            </path>
          </svg>
          Sign up
        </span>
        }
        @if(!isLoading)
        {
        Sign up
        }
      </button>

    </form>
    @if(successMessage())
    {
    <p-message severity="success" styleClass="mt-5">{{successMessage()}}</p-message>
    }

    @if(errorMessage()){
    <p-message severity="error" styleClass="mt-5">{{errorMessage()}}</p-message>

    }
    <div class="my-5 flex items-center justify-center">
      <span class="border-t border-gray-300 dark:border-gray-600 flex-grow"></span>
      <span class="mx-3 text-gray-500 dark:text-gray-400 text-xs uppercase">or continue with</span>
      <span class="border-t border-gray-300 dark:border-gray-600 flex-grow"></span>
    </div>

    <div class="flex gap-4">
      <button
        class="flex items-center justify-center gap-2 w-1/2 px-4 py-2 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-700 dark:text-gray-200 hover:bg-gray-50 hover:dark:bg-gray-700 transition"
        type="button">
        <img ngSrc="google-logo.webp" alt="Google" class="h-5 w-5" width="100" height="100" />
        Google
      </button>
      <button
        class="flex items-center justify-center gap-2 w-1/2 px-4 py-2 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-700 dark:text-gray-200 hover:bg-gray-50 hover:dark:bg-gray-700 transition"
        type="button">
        <img class="h-5 w-5" ngSrc="github-logo.png" width="100" height="100" alt="Github Logo" />
        GitHub
      </button>
    </div>
    <p class="text-sm text-center text-gray-600 dark:text-gray-400 mt-6">
      Already have an account?
      <a routerLink="/login" class="text-blue-600 hover:underline dark:text-blue-400">Sign in</a>
    </p>
  </div>
</div>